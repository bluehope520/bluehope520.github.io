<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Element Plus Sidebar with Bootstrap 5</title>

    <!-- Vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.min.js"></script>
    <!-- Element Plus CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/element-plus/dist/index.css"
    />
    <script src="https://unpkg.com/@element-plus/icons-vue"></script>

    <script src="https://unpkg.com/element-plus/dist/index.full.js"></script>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <style>
      /* å´é‚Šæ¬„æ”¶åˆå¯¬åº¦åˆ‡æ› (Bootstrap ç„¡æ­¤ç´°é …ï¼Œéœ€è‡ªè¡Œå®šç¾©) */
      .aside-collapsed {
        width: 64px;
        transition: width 0.3s ease;
      }
      .aside-expanded {
        width: 160px;
        transition: width 0.3s ease;
      }
      /* å´é‚Šæ¬„æ”¶åˆ/å±•é–‹å‹•ç•« */
      .sidebar-hidden {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }
      .sidebar-visible {
        transform: translateX(0);
        transition: transform 0.3s ease;
      }

      /* RWD å°ç­†é›» (>=992px) æ‰æœƒé¡¯ç¤º */
      @media (min-width: 992px) {
        .menu-btn {
          display: none;
        }
      }
    </style>
  </head>
  <body class="m-0 p-0">
    <body class="m-0 p-0">
      <div id="app" class="bg-light">
        <!-- ğŸ“Œ æ¼¢å ¡æŒ‰éˆ• (åœ–1) -->
        <button
          class="menu-btn position-fixed top-0 start-0 m-3 border-0 bg-transparent"
          @click="toggleSidebar"        
        >
          <i class="bi bi-list fs-3"></i>
        </button>

        <el-container class="d-flex flex-row min-vh-100">
          <!-- ğŸ“Œ å´é‚Šé¸å–® (åœ–2) -->
          <el-aside
            :class="[
              'bg-white shadow overflow-hidden d-flex flex-column justify-content-between',
              isSidebarOpen ? 'sidebar-visible' : 'sidebar-hidden'
            ]"
          >
            <el-menu :default-active="activeIndex" class="border-0 flex-grow-1">
              <!-- ğŸ“Œ é—œé–‰æŒ‰éˆ• -->
              <el-menu-item class="d-flex align-items-center px-3 py-2">
                <i class="bi bi-x-lg fs-5" @click="toggleSidebar"></i>
              </el-menu-item>

              <!-- ğŸ“Œ é¸å–® -->
              <el-menu-item index="2"
                ><el-icon><compass /></el-icon> ç™¼ç¾</el-menu-item
              >
              <el-menu-item index="3"
                ><el-icon><flag /></el-icon> è¡Œç¨‹éˆæ„Ÿ</el-menu-item
              >
              <el-menu-item index="4"
                ><el-icon><shopping-cart /></el-icon> å•†åŸ</el-menu-item
              >
              <el-menu-item index="5"
                ><el-icon><flag /></el-icon> å»æƒ³é€™å¤¢æƒ³</el-menu-item
              >
              <el-menu-item index="6"
                ><el-icon><user /></el-icon> æœƒå“¡</el-menu-item
              >
            </el-menu>
          </el-aside>
        </el-container>
      </div>
    </body>

    <script>
      const { createApp } = Vue;

      const app = createApp({
        data() {
          return {
            isSidebarOpen: false, // å´é‚Šæ¬„æ˜¯å¦é–‹å•Ÿ
            activeIndex: "2", // é è¨­é¸å–®é¸ä¸­é …ç›®
            windowWidth: window.innerWidth, // ç•¶å‰è¦–çª—å¯¬åº¦
          };
        },
        methods: {
          toggleSidebar() {
            this.isSidebarOpen = !this.isSidebarOpen;
          },
          updateWindowWidth() {
            this.windowWidth = window.innerWidth;
          },
        },
        mounted() {
          // ç›£è½è¦–çª—å¤§å°è®ŠåŒ–
          window.addEventListener("resize", this.updateWindowWidth);
        },
        beforeUnmount() {
          // ç§»é™¤ç›£è½
          window.removeEventListener("resize", this.updateWindowWidth);
        },
      });
      app.use(ElementPlus);
      // è¨»å†Šæ‰€æœ‰ Icons
      for (const [key, component] of Object.entries(ElementPlusIconsVue)) {
        app.component(key, component);
      }
      console.log(window.ElementPlusIconsVue);
      app.mount("#app");
    </script>
  </body>
</html>